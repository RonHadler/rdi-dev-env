# ══════════════════════════════════════════════════════════════
# rdi-dev-env — tmux Configuration
# ══════════════════════════════════════════════════════════════
# Optimized for 3-pane development layout with Claude Code.
# Install: bash install.sh (symlinks to ~/.tmux.conf)

# ── General ──────────────────────────────────────────────────

# 256 color + true color support
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",xterm-256color:Tc"

# Start panes and windows at 1 instead of 0
set -g base-index 1
set -g pane-base-index 1

# Renumber windows when one is closed
set -g renumber-windows on

# Scrollback history
set -g history-limit 10000

# Reduce escape time (faster key response)
set -sg escape-time 10

# Enable mouse support (scroll, resize, select panes)
set -g mouse on

# ── Prefix Key ───────────────────────────────────────────────

# Keep default Ctrl+B prefix
# Uncomment below to change to Ctrl+A:
# unbind C-b
# set -g prefix C-a
# bind C-a send-prefix

# ── Pane Navigation (Alt+Arrow, no prefix needed) ───────────

bind -n M-Left  select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up    select-pane -U
bind -n M-Down  select-pane -D

# ── Pane Splitting (keep intuitive keys) ────────────────────

# Split horizontal with | (same directory)
bind | split-window -h -c "#{pane_current_path}"

# Split vertical with - (same directory)
bind - split-window -v -c "#{pane_current_path}"

# New window in same directory
bind c new-window -c "#{pane_current_path}"

# ── Pane Borders ─────────────────────────────────────────────

# Show pane titles in borders
set -g pane-border-status top
set -g pane-border-format " #{pane_index}: #{pane_title} "

# Active pane: bright cyan border
set -g pane-active-border-style "fg=cyan,bold"

# Inactive panes: dim gray border
set -g pane-border-style "fg=colour240"

# ── Status Bar ───────────────────────────────────────────────

# Position at bottom
set -g status-position bottom

# Update every 5 seconds
set -g status-interval 5

# Colors
set -g status-style "bg=colour235,fg=colour248"

# Left: session name
set -g status-left-length 30
set -g status-left "#[fg=cyan,bold] #S #[fg=colour240]| "

# Right: git branch + time
set -g status-right-length 60
set -g status-right "#[fg=colour245]#(cd #{pane_current_path} && git branch --show-current 2>/dev/null || echo '-') #[fg=colour240]| #[fg=colour248]%H:%M "

# Window tabs
set -g window-status-format " #I:#W "
set -g window-status-current-format "#[fg=cyan,bold] #I:#W "

# ── Copy Mode (Vi keys) ─────────────────────────────────────

setw -g mode-keys vi

# Enter copy mode with prefix + [
# Select with v, copy with y
bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-selection-and-cancel

# ── Reload Config ────────────────────────────────────────────

# Prefix + r to reload
bind r source-file ~/.tmux.conf \; display-message "Config reloaded"
